# 映画レコメンデーションシステム

Web上でユーザーが好きな映画を3つ選択すると、その傾向に基づいたオススメ映画を動的に表示するWebアプリケーションです。

## 採用したアルゴリズムと理由

### 1. 選択時：アイテムベース協調フィルタリング
ユーザーが選択した映画と「評価パターンの相関が高い映画」を提案するため、**アイテムベース協調フィルタリング（相関係数の算出）** を採用しました。
*   **理由:** ユーザーの属性情報（年齢や性別など）を使わず、過去の膨大な評価データ（ratings）のみを利用して、選択された作品と「似た評価をされやすい作品」を精度良く抽出できるためです。

### 2. 未選択時：ポピュラリティ（人気）ベース
ユーザーの好みが不明な状態（コールドスタート）であるため、統計的に支持されている映画を提案する**ポピュラリティベース**のロジックを採用しました。
*   **理由:** 個人の嗜好が分からない段階では、「多くの人が評価し、かつ高得点をつけた映画」を提示することが、ハズレの少ない最も確実な推薦手法であるためです。

## ロジック内容（ボタン押下から表示まで）

Web画面の「オススメ映画を表示」ボタンが押下されると、以下のフローで処理が実行されます。

1.  **入力の受け取り**
    *   フロントエンドから送信された「3つの映画タイトル」を受け取ります。
    *   空欄（未選択）の部分は除去し、有効な選択リストを作成します。

2.  **分岐処理**
    *   **【未選択の場合】**
        *   全評価データを映画タイトルごとにグループ化し、「評価数」と「平均スコア」を算出します。
        *   信頼性を担保するため評価数が10件以上の映画に絞り込み、平均スコアが高い順にソートして上位5件を取得します。
    
    *   **【選択ありの場合】**
        *   事前に作成した「ユーザー×映画」のクロス集計表（ピボットテーブル）を使用します。
        *   選択された最大3つの映画それぞれについて、他の全映画との**相関係数（ピアソン相関）**を計算します。
        *   **ポイント:** 3つの映画から得られた相関スコアを**合算（加算）**します。これにより、「1つの映画にだけ似ている」のではなく、「選ばれた3つ全体の傾向に近い」映画が上位に来るように重み付けを行います。
        *   選択済みの映画リストを除外し、合算スコアが高い順に上位5件を取得します。

3.  **画面表示**
    *   取得した映画リストを結果画面（HTML）に渡し、リスト形式で表示します。

## 起動手順

### 1. 動作環境
*   Python 3.x

### 2. インストール作業
プロジェクトフォルダにて以下のコマンドを実行し、必要なライブラリをインストールしてください。

```bash
pip install -r requirements.txt
```


#### 3. アプリケーション起動
```bash
python app.py
```
コマンド実行後、ブラウザで以下のURLにアクセスするとシステムが利用できます。
http://127.0.0.1:5000/
